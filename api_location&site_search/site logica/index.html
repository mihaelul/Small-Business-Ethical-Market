<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Interests</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Candal&family=Montserrat:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #f9f3ef;
        color: #6d3626;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        text-align: center;
      }

      .button-container {
        display: flex;
        justify-content: flex-end;
        margin-top: 40px;
      }

      .title-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
        margin-bottom: 40px;
      }

      .title-image {
        width: 121px;
        height: 260px;
        object-fit: contain;
      }

      h1 {
        font-family: "Candal", sans-serif;
        font-size: 60px;
        margin: 0;
        font-weight: bold;
        color: #813e2f;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
      }

      .item {
        position: relative;
        border-radius: 12px;
        overflow: hidden;
        cursor: pointer;
        transition: transform 0.2s ease;
        border: 3px solid transparent;
        will-change: transform;
        transform: translateZ(0);
      }

      .item.selected {
        border-color: #813e2f;
      }

      .item img {
        width: 100%;
        height: 160px;
        object-fit: cover;
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
        will-change: transform;
        transform: translateZ(0);
        backface-visibility: hidden;
      }

      .item::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #d2a59d;
        opacity: 0.5;
        pointer-events: none;
      }

      .item:hover {
        transform: scale(1.03);
      }

      .item span {
        font-family: "Montserrat", sans-serif;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 35px;
        font-weight: bold;
        text-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
        z-index: 1;
        text-align: center;
      }

      .next-btn {
        font-family: "Montserrat", sans-serif;
        padding: 12px 32px;
        background: #953a32;
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="title-container">
        <img
          src="pictures/f55d3a817b1997922e33c096e05d5dcff5e6a8cd.png"
          alt="Logo"
          class="title-image"
        />
        <h1>What type of products are you interested in?</h1>
      </div>

      <div class="grid" id="categories-grid">
        <!-- Categories will be loaded dynamically -->
      </div>

      <div class="button-container">
        <button class="next-btn" onclick="window.location.href='main2.html'">
          Next
        </button>
      </div>
    </div>

    <script src="Node.js"></script>
    <script>
      "use strict";
      document.addEventListener("DOMContentLoaded", () => {
        const grid = document.getElementById("categories-grid");

        // Map categories to image files
        const categoryImages = {
          "Articole de îmbrăcăminte":
            "set-clothes-accessories-white-background-top-view-flat-lay.jpg",
          Electronice: "laptop-with-camera-smartphone-table.jpg",
          Electrocasnice: "view-open-washing-machine.jpg",
          Mobilier:
            "cozy-retroinspired-living-room-with-wooden-furniture-decorative-accents.jpg",
          Cărți: "pile-books-with-yellow-flower-top.jpg",
          "Sport și fitness": "modern-sport-elements-composition.jpg",
          Jucării: "still-life-crochet-plushies.jpg",
          "Cosmetice și parfumuri": "compostable-care-products-arrangement.jpg",
          "Alimente și băuturi":
            "high-angle-view-chopped-vegetables-cutting-board.jpg",
          "Auto și moto": "bicycle-piece-wooden-table.jpg",
          Accesorii: "fathers-day-composition-with-accessories.jpg",
          "Gradină și exterior":
            "farm-gardener-gardening-garden-horticulture.jpg",
        };

        // Load previously selected categories from localStorage
        const savedCategories = JSON.parse(
          localStorage.getItem("selectedCategories") || "[]"
        );

        // Function to save selected categories
        const saveSelectedCategories = () => {
          const selectedItems = grid.querySelectorAll(".item.selected");
          const selected = Array.from(selectedItems).map(
            (item) => item.querySelector("span").textContent
          );
          localStorage.setItem("selectedCategories", JSON.stringify(selected));
        };

        // Generate grid items from profileCategories array
        profileCategories.forEach((category) => {
          const item = document.createElement("div");
          item.className = "item";

          // Check if category is already selected
          if (savedCategories.includes(category)) {
            item.classList.add("selected");
          }

          const img = document.createElement("img");
          img.src = `pictures/${categoryImages[category] || "placeholder.jpg"}`;
          img.alt = category;
          img.loading = "lazy";
          img.decoding = "async";
          img.width = 280;
          img.height = 160;

          const span = document.createElement("span");
          span.textContent = category;

          // Add click event listener
          item.addEventListener("click", () => {
            item.classList.toggle("selected");
            saveSelectedCategories();
          });

          item.appendChild(img);
          item.appendChild(span);
          grid.appendChild(item);
        });
      });
    </script>
  </body>
</html>
